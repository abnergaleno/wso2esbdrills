<?xml version="1.0" encoding="UTF-8"?>
<api context="/xmljson" name="api_xmljsonconversion" xmlns="http://ws.apache.org/ns/synapse">
  <resource methods="GET" protocol="http">
    <inSequence>
      <loopback description="gotoOUT"/>
    </inSequence>
    <outSequence>
      <log description="JUSTALOG" level="custom" separator="==========">
        <property expression="//jsonObject/*" name="INSIDEOFjsonObject"/>
      </log>
      <property description="payloadxml" name="payloadxml"
        scope="default" type="STRING" value="&lt;responseXCX>xyz&lt;responseXCX/>"/>
      <enrich description="addChildToPayload">
        <source clone="true" property="payloadxml" type="property"/>
        <target action="child" xpath="/default/xpath"/>
      </enrich>
      <property description="applicationXML" name="messageType"
        scope="axis2" type="STRING" value="application/xml"/>
      <log description="logthepayloadXML" level="custom" separator="==========">
        <property expression="$ctx:payloadxml" name="LOGMESSAGE['payloadxml']"/>
      </log>
      <payloadFactory description="prop_payloadxml_aspayload" media-type="json">
        <format>$1</format>
        <args>
          <arg evaluator="xml" expression="$ctx:payloadxml"/>
        </args>
      </payloadFactory>
      <send/>
    </outSequence>
    <faultSequence/>
  </resource>
</api>
